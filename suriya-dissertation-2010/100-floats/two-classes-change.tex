\begin{figure}[t]
\lstset{frame=single}
\begin{tabular}{@{}m{0.5\textwidth}@{}m{0.5\textwidth}@{}}
\BC \begin{minipage}{0.3\textwidth}
\begin{lstlisting}
public class X {
  private Y y;
}
public class Y {
  private int i;
}
\end{lstlisting}
\end{minipage} \EC &
\BC \begin{minipage}{0.32\textwidth}
\begin{lstlisting}
public class X {
  String s;
  private Y y;
}
public class Y {
  private int i, j;
}
\end{lstlisting}
\end{minipage} \EC \\[-3ex]
\BC (a) Old version \EC &
\BC (b) New version \EC \\[-2ex]
\end{tabular}
\BC \begin{minipage}{0.75\textwidth}
\begin{lstlisting}
class old_X { public Y y; }
class old_Y { public int i; }
class JvolveTransformers {
  public static void
      jvolveObject(X to, old_X from) {
    to.s = null; to.y = from.y;
  }
  public static void
      jvolveObject(Y to, old_Y from) {
    to.i = from.i; to.j = 0;
  }
}
\end{lstlisting}
\vspace{-1ex} \BC (c) Stub classes used in transformers \EC
\end{minipage} \EC
\hangcaption{Example of a simple update where the field of an updated class
refers to another updated class\label{fig:two-classes-change}}
\VspaceFixForHangcaption
\lstset{frame=none}
\end{figure}
