\begin{figure}[t]
\centering
\begin{minipage}{0.3\textwidth}%
\begin{lstlisting}[frame=single]
transaction {
  ...
  foo();
  ...
  bar();
  ...
  baz();
  ...
}
\end{lstlisting}
\end{minipage}
\caption{Simple transaction region marked by the programmer}
\label{fig:transaction-safety}
\end{figure}
